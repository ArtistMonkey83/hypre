#!/bin/sh
#BHEADER***********************************************************************
# (c) 1998   The Regents of the University of California
#
# See the file COPYRIGHT_and_DISCLAIMER for a complete copyright
# notice, contact person, and disclaimer.
#
# $Revision: 2.0 $
#EHEADER***********************************************************************

DRIVER_ARGS=""
POE_NUM_PROCS="1"
POE_NUM_NODES="1"
CPUS_PER_NODE="4"
while [ "$*" != "" ]
do
case $1 in
    -np)
	POE_NUM_PROCS=$2
	POE_NUM_NODES=`expr $POE_NUM_PROCS + $CPUS_PER_NODE - 1`
	POE_NUM_NODES=`expr $POE_NUM_NODES / $CPUS_PER_NODE`
	shift
        shift;;
    *)
        DRIVER_ARGS="$DRIVER_ARGS $1"
        shift;;
esac
done

echo "(poe $DRIVER_ARGS -procs $POE_NUM_PROCS -nodes $POE_NUM_NODES)"
poe $DRIVER_ARGS -procs $POE_NUM_PROCS -nodes $POE_NUM_NODES

